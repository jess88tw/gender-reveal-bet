# å¯¶å¯¶æ€§åˆ¥æ­æ›‰æ´¾å° - å°ˆæ¡ˆæ¦‚è¦½

## ğŸ¯ å°ˆæ¡ˆç›®æ¨™

å»ºç«‹ä¸€å€‹äº’å‹•å¼ç¶²ç«™,è®“æœ‹å‹å’Œå®¶äººå¯ä»¥ç·šä¸Šä¸‹æ³¨å¯¶å¯¶æ€§åˆ¥,ä¸¦åœ¨æ­æ›‰æ™‚é€²è¡ŒæŠ½çã€‚

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
gender-reveal-bet/
â”œâ”€â”€ backend/                 # Node.js + Express å¾Œç«¯
â”‚   â”œâ”€â”€ prisma/
â”‚   â”‚   â””â”€â”€ schema.prisma   # è³‡æ–™åº« Schema (MongoDB)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ routes/         # API è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts    # èªè­‰ç›¸é—œ
â”‚   â”‚   â”‚   â”œâ”€â”€ bets.ts    # ä¸‹æ³¨ç›¸é—œ
â”‚   â”‚   â”‚   â”œâ”€â”€ clues.ts   # ç·šç´¢ç›¸é—œ
â”‚   â”‚   â”‚   â””â”€â”€ admin.ts   # ç®¡ç†åŠŸèƒ½
â”‚   â”‚   â”œâ”€â”€ middleware/     # ä¸­é–“ä»¶
â”‚   â”‚   â”œâ”€â”€ lib/           # å·¥å…·å‡½å¼
â”‚   â”‚   â””â”€â”€ index.ts       # ä¸»ç¨‹å¼
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ .env.example
â”‚
â”œâ”€â”€ frontend/               # Angular 17 å‰ç«¯ (Standalone)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”‚   â”œâ”€â”€ components/  # UI å…ƒä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ home/           # é¦–é  (çµ±è¨ˆé¡¯ç¤º)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ betting/        # ä¸‹æ³¨é é¢
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ my-bets/        # æˆ‘çš„ä¸‹æ³¨è¨˜éŒ„
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ clues/          # ç·šç´¢é é¢
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ participants/   # åƒèˆ‡è€…åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ services/    # API æœå‹™ (ä½¿ç”¨ signals)
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ bet.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ clue.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ admin.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ models/      # è³‡æ–™æ¨¡å‹
â”‚   â”‚   â”‚   â””â”€â”€ app.routes.ts # è·¯ç”±è¨­å®š (lazy loading)
â”‚   â”‚   â””â”€â”€ environments/    # ç’°å¢ƒè¨­å®š
â”‚   â””â”€â”€ package.json
â”‚
â”œâ”€â”€ README.md               # å°ˆæ¡ˆèªªæ˜
â”œâ”€â”€ DEVELOPMENT.md          # é–‹ç™¼æŒ‡å—
â”œâ”€â”€ DEPLOYMENT.md           # éƒ¨ç½²æŒ‡å—
â””â”€â”€ PROJECT_OVERVIEW.md     # æœ¬æ–‡ä»¶
```

## âœ… å·²å®ŒæˆåŠŸèƒ½

### å¾Œç«¯ API

- âœ… ä½¿ç”¨è€…èªè­‰ (Google OAuth)
- âœ… ä¸‹æ³¨ç³»çµ±
  - å»ºç«‹ä¸‹æ³¨
  - æŸ¥è©¢å€‹äººä¸‹æ³¨è¨˜éŒ„
  - æŸ¥è©¢çµ±è¨ˆè³‡è¨Š
- âœ… ç·šç´¢ç®¡ç†
  - CRUD æ“ä½œ
- âœ… ç®¡ç†åŠŸèƒ½
  - æ€§åˆ¥æ­æ›‰
  - æŠ½çç³»çµ±
  - ä»˜æ¬¾ç¢ºèª

### å‰ç«¯ä»‹é¢

- âœ… é¦–é  (`home.component`) - çµ±è¨ˆé¡¯ç¤º
- âœ… ä¸‹æ³¨é é¢ (`betting.component`) - é¸æ“‡æ€§åˆ¥ã€é‡‘é¡
- âœ… æˆ‘çš„ä¸‹æ³¨ (`my-bets.component`) - å€‹äººä¸‹æ³¨è¨˜éŒ„
- âœ… ç·šç´¢é é¢ (`clues.component`) - é¡¯ç¤ºæ‰€æœ‰ç·šç´¢
- âœ… åƒèˆ‡è€…åˆ—è¡¨ (`participants.component`) - æ‰€æœ‰åƒèˆ‡è€…

### å‰ç«¯æœå‹™

- âœ… èªè­‰æœå‹™ (`auth.service.ts`) - ä½¿ç”¨ signals
- âœ… ä¸‹æ³¨æœå‹™ (`bet.service.ts`) - ä½¿ç”¨ signals
- âœ… ç·šç´¢æœå‹™ (`clue.service.ts`) - ä½¿ç”¨ signals
- âœ… ç®¡ç†æœå‹™ (`admin.service.ts`) - ä½¿ç”¨ signals

### è³‡æ–™åº«

- âœ… Prisma Schema è¨­è¨ˆ (MongoDB)
- âœ… ä½¿ç”¨è€…è¡¨
- âœ… ä¸‹æ³¨è¨˜éŒ„è¡¨
- âœ… ç·šç´¢è¡¨
- âœ… æ­æ›‰è¨­å®šè¡¨

## ğŸš§ å¾…å®ŒæˆåŠŸèƒ½

### å‰ç«¯å…ƒä»¶

1. **ç®¡ç†å¾Œå°** (`admin.component`)
   - æŸ¥çœ‹æ‰€æœ‰ä¸‹æ³¨
   - ç¢ºèªä»˜æ¬¾
   - æ­æ›‰æ€§åˆ¥
   - åŸ·è¡ŒæŠ½ç

### Google ç™»å…¥æ•´åˆ

éœ€è¦åœ¨å‰ç«¯æ•´åˆ Google Identity Services:

```typescript
// åœ¨ index.html åŠ å…¥
<script src="https://accounts.google.com/gsi/client" async defer></script>

// åœ¨å…ƒä»¶ä¸­å¯¦ä½œ
declare var google: any;

initGoogleSignIn() {
  google.accounts.id.initialize({
    client_id: environment.googleClientId,
    callback: this.handleCredentialResponse.bind(this)
  });

  google.accounts.id.renderButton(
    document.getElementById('googleSignInButton'),
    { theme: 'outline', size: 'large' }
  );
}
```

### æª”æ¡ˆä¸Šå‚³åŠŸèƒ½ (ç·šç´¢åœ–ç‰‡)

å¯ä»¥ä½¿ç”¨:

- Cloudinary
- AWS S3
- æˆ–ç°¡å–®çš„ Base64 å„²å­˜

### ç›´æ’­æ•´åˆ (é¸é…)

- YouTube Live åµŒå…¥
- æˆ–ä½¿ç”¨ Twitch
- å³æ™‚èŠå¤©åŠŸèƒ½

## ğŸ“‹ å¾ŒçºŒæ­¥é©Ÿ

### 1. å®Œæˆç®¡ç†å¾Œå°å…ƒä»¶

```bash
cd frontend/src/app/components
ng generate component admin
```

### 2. è¨­å®šé–‹ç™¼ç’°å¢ƒ

æŒ‰ç…§ `DEVELOPMENT.md` çš„æŒ‡ç¤º:

1. è¨­å®š MongoDB Atlas
2. è¨­å®šç’°å¢ƒè®Šæ•¸
3. åŸ·è¡Œ `npx prisma db push`
4. å•Ÿå‹•å¾Œç«¯å’Œå‰ç«¯

### 3. Google OAuth è¨­å®š

1. åœ¨ Google Cloud Console å»ºç«‹å°ˆæ¡ˆ
2. è¨­å®š OAuth 2.0 æ†‘è­‰
3. æ›´æ–°ç’°å¢ƒè®Šæ•¸

### 4. æ¸¬è©¦åŠŸèƒ½

- æ¸¬è©¦ç™»å…¥æµç¨‹
- æ¸¬è©¦ä¸‹æ³¨åŠŸèƒ½
- æ¸¬è©¦çµ±è¨ˆæ›´æ–°
- æ¸¬è©¦ç®¡ç†åŠŸèƒ½

### 5. éƒ¨ç½²

æŒ‰ç…§ `DEPLOYMENT.md` éƒ¨ç½²åˆ°:

- å¾Œç«¯: Railway
- å‰ç«¯: Vercel
- è³‡æ–™åº«: MongoDB Atlas (é›²ç«¯)

## ğŸ¨ è¨­è¨ˆå»ºè­°

### è‰²å½©æ–¹æ¡ˆ

- **ç”·ç”Ÿ**: `#4A90E2` (è—è‰²)
- **å¥³ç”Ÿ**: `#E94B8A` (ç²‰ç´…è‰²)
- **ä¸­æ€§**: `#F8F9FA` (æ·ºç°)
- **æˆåŠŸ**: `#28A745` (ç¶ è‰²)

### UI å…ƒä»¶åº« (å¯é¸)

è€ƒæ…®ä½¿ç”¨:

- Angular Material
- PrimeNG
- æˆ–è‡ªå·±æ‰‹åˆ» (ç›®å‰å·²æœ‰åŸºæœ¬æ¨£å¼)

## ğŸ’¡ åŠŸèƒ½æ“´å……å»ºè­°

### çŸ­æœŸ

1. **å³æ™‚é€šçŸ¥**: ä½¿ç”¨ WebSocket æˆ– Server-Sent Events
2. **ä»˜æ¬¾æ•´åˆ**: ä¸²æ¥å°ç£é‡‘æµ (ç¶ ç•Œã€è—æ–°)
3. **LINE é€šçŸ¥**: ä¸‹æ³¨æˆåŠŸç™¼é€ LINE è¨Šæ¯

### é•·æœŸ

1. **å¤šèªè¨€æ”¯æ´**: i18n (ä¸­æ–‡/è‹±æ–‡)
2. **ä¸»é¡Œåˆ‡æ›**: æ·±è‰²/æ·ºè‰²æ¨¡å¼
3. **æ‰‹æ©Ÿ App**: ä½¿ç”¨ Ionic æˆ– React Native
4. **æ•¸æ“šåˆ†æ**: ä¸‹æ³¨è¶¨å‹¢åœ–è¡¨

## ğŸ”’ å®‰å…¨æ³¨æ„äº‹é …

1. **ç’°å¢ƒè®Šæ•¸**: çµ•å°ä¸è¦æäº¤ `.env` åˆ° Git
2. **Session Secret**: ä½¿ç”¨å¼·å¯†ç¢¼ä¸¦å®šæœŸæ›´æ›
3. **è¼¸å…¥é©—è­‰**: å¾Œç«¯å¿…é ˆé©—è­‰æ‰€æœ‰è¼¸å…¥
4. **Rate Limiting**: é˜²æ­¢ API æ¿«ç”¨
5. **HTTPS**: æ­£å¼ç’°å¢ƒå¿…é ˆä½¿ç”¨ HTTPS

## ğŸ“ æ”¯æ´èˆ‡å›é¥‹

é‡åˆ°å•é¡Œæ™‚:

1. æŸ¥çœ‹ `DEVELOPMENT.md` çš„å¸¸è¦‹å•é¡Œ
2. æª¢æŸ¥ console çš„éŒ¯èª¤è¨Šæ¯
3. æŸ¥çœ‹å¾Œç«¯ logs: `railway logs`

## ğŸ‰ æ€§åˆ¥æ­æ›‰æ—¥æ¸…å–®

æ­æ›‰ç•¶å¤©è¦åšçš„äº‹:

- [ ] ç¢ºèªæ‰€æœ‰ä¸‹æ³¨ä»˜æ¬¾éƒ½å·²ç¢ºèª
- [ ] æ¸¬è©¦ç›´æ’­åŠŸèƒ½
- [ ] æº–å‚™æ­æ›‰å½±ç‰‡/é“å…·
- [ ] åœ¨ç®¡ç†å¾Œå°æ­æ›‰æ€§åˆ¥
- [ ] åŸ·è¡ŒæŠ½çåŠŸèƒ½
- [ ] å…¬å¸ƒå¾—çè€…
- [ ] çµ±è¨ˆå¥¶ç²‰éŒ¢ç¸½é¡

ç¥ä½ çš„å¯¶å¯¶æ€§åˆ¥æ´¾å°åœ“æ»¿æˆåŠŸï¼ğŸŠğŸ‘¶

---

## å¿«é€ŸæŒ‡ä»¤åƒè€ƒ

### å¾Œç«¯

```bash
cd backend
npm run dev          # å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨ (port 3333)
npx prisma studio    # é–‹å•Ÿè³‡æ–™åº«ç®¡ç†ä»‹é¢
npx prisma db push   # åŒæ­¥ Schema åˆ° MongoDB
```

### å‰ç«¯

```bash
cd frontend
npm start           # å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨ (port 4444)
ng build --configuration production  # å»ºç½®æ­£å¼ç‰ˆæœ¬
ng generate component components/<name>  # å»ºç«‹æ–°å…ƒä»¶
```

### éƒ¨ç½²

```bash
# å¾Œç«¯ (Railway)
railway login
railway link
railway up

# å‰ç«¯ (Vercel)
vercel
vercel --prod
```
