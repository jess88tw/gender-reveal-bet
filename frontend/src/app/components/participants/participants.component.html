<div class="participants-container">
  <header class="page-header">
    <a routerLink="/" class="back-btn">â† è¿”å›</a>
    <h1>ğŸ‘¥ åƒèˆ‡è€…</h1>
  </header>

  @if (loading()) {
    <div class="loading">
      <div class="spinner"></div>
      <p>è¼‰å…¥ä¸­...</p>
    </div>
  } @else if (participants().length === 0) {
    <div class="empty-state">
      <p>ğŸ¯ é‚„æ²’æœ‰äººä¸‹æ³¨ï¼Œå¿«ä¾†æˆç‚ºç¬¬ä¸€å€‹ï¼</p>
      <a routerLink="/bet" class="btn btn-primary">ç«‹å³ä¸‹æ³¨</a>
    </div>
  } @else {
    <!-- Summary -->
    <div class="summary">
      <p>
        å…± <strong>{{ participants().length }}</strong> äººåƒèˆ‡
      </p>
    </div>

    <!-- Sort Options -->
    <div class="sort-options">
      <span>æ’åºï¼š</span>
      <button
        [class.active]="sortBy() === 'name'"
        (click)="setSortBy('name')"
      >
        åå­—
      </button>
      <button
        [class.active]="sortBy() === 'gender'"
        (click)="setSortBy('gender')"
      >
        æ€§åˆ¥
      </button>
    </div>

    <!-- Participants List -->
    <div class="participants-list">
      @for (
        participant of sortedParticipants();
        track participant.id;
        let i = $index
      ) {
        <div class="participant-card">
          <div class="rank">{{ i + 1 }}</div>
          <div class="avatar">
            @if (participant.avatarUrl) {
              <img [src]="participant.avatarUrl" [alt]="participant.name" />
            } @else {
              <span class="initials">{{ getInitials(participant.name) }}</span>
            }
          </div>
          <div class="info">
            <p class="name">{{ participant.name }}</p>
            <p class="total">
              @if (participant.gender === 'BOY') {
                ğŸ‘¦ æŠ¼ç”·ç”Ÿ
              } @else if (participant.gender === 'GIRL') {
                ğŸ‘§ æŠ¼å¥³ç”Ÿ
              } @else {
                å°šæœªä¸‹æ³¨
              }
            </p>
          </div>
        </div>
      }
    </div>
  }

  <!-- Navigation -->
  <div class="nav-section">
    <a routerLink="/bet" class="btn btn-primary">åŠ å…¥ä¸‹æ³¨</a>
  </div>
</div>
