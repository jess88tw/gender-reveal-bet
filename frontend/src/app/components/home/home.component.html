<div class="home-container">
  <!-- Hero Section -->
  <section class="hero" [class.hero-boy]="isRevealed() && revealedGender() === 'BOY'" [class.hero-girl]="isRevealed() && revealedGender() === 'GIRL'">
    @if (isRevealed()) {
      <div class="reveal-confetti">ğŸŠ</div>
      <h1>{{ revealedGender() === 'BOY' ? 'ğŸ‘¦' : 'ğŸ‘§' }} æ˜¯{{ revealedGender() === 'BOY' ? 'ç”·ç”Ÿ' : 'å¥³ç”Ÿ' }}ï¼</h1>
      <p class="subtitle">ğŸ‰ æ€§åˆ¥å·²æ­æ›‰ï¼æ„Ÿè¬å¤§å®¶çš„åƒèˆ‡ï¼</p>
    } @else {
      <h1>ğŸ€ å¯¶å¯¶æ€§åˆ¥æ­æ›‰æ´¾å° ğŸ‘¶</h1>
      <p class="subtitle">çŒœçŒœçœ‹æ˜¯ç”·ç”Ÿé‚„æ˜¯å¥³ç”Ÿï¼Ÿ</p>
    }
  </section>

  <!-- Stay Tuned / Winner Announcement -->
  @if (isRevealed() && !winner()) {
    <section class="stay-tuned-section">
      <div class="stay-tuned-card">
        <div class="stay-tuned-icon">ğŸ¥</div>
        <h2>å³å°‡æŠ½çï¼</h2>
        <p>æ€§åˆ¥å·²æ­æ›‰ï¼ŒæŠ½çå³å°‡é–‹å§‹â‹¯</p>
        <p class="stay-tuned-hint">ğŸ™ å…ˆä¸è¦é›¢é–‹ï¼Œé¦¬ä¸Šå…¬å¸ƒå¹¸é‹å¾—ä¸»ï¼</p>
      </div>
    </section>
  } @else if (winner()) {
    <section class="winner-section">
      <div class="winner-card">
        <div class="winner-badge">ğŸ†</div>
        <h2>æ­å–œä¸­çï¼</h2>
        <div class="winner-info">
          <div class="winner-avatar">
            @if (winner()!.avatarUrl) {
              <img [src]="winner()!.avatarUrl" [alt]="winner()!.name" />
            } @else {
              <span class="winner-initials">{{ winner()!.name.charAt(0) }}</span>
            }
          </div>
          <p class="winner-name">ğŸ‰ {{ winner()!.name }} ğŸ‰</p>
        </div>
        @if (prizeInfo()) {
          <div class="prize-details">
            <div class="prize-row">
              <span>ç¸½çé‡‘æ± </span>
              <span>NT$ {{ prizeInfo()!.totalPool | number }}</span>
            </div>
            <div class="prize-row">
              <span>æ‰‹çºŒè²»ï¼ˆ10% å¥¶ç²‰éŒ¢ ğŸ¼ï¼‰</span>
              <span class="fee">- NT$ {{ prizeInfo()!.fee | number }}</span>
            </div>
            <div class="prize-row total">
              <span>å¾—ä¸»çé‡‘</span>
              <span class="prize-amount">NT$ {{ prizeInfo()!.winnerPrize | number }}</span>
            </div>
          </div>
        }
      </div>
    </section>
  }

  <!-- Stats Section -->
  <section class="stats-section">
    @if (loading()) {
      <div class="loading">
        <div class="spinner"></div>
        <p>è¼‰å…¥ä¸­...</p>
      </div>
    } @else {
      <div class="stats-container">
        <!-- Boy Box -->
        <div class="bet-box boy-box">
          <div class="box-icon">ğŸ‘¦</div>
          <h2>ç”·ç”Ÿ</h2>
          @if (stats()) {
            <div class="stats-info">
              <p class="amount">NT$ {{ stats()!.boy.totalAmount | number }}</p>
              <p class="tickets">{{ stats()!.boy.totalTickets }} å¼µç±¤</p>
              <div class="percentage-bar">
                <div
                  class="fill boy-fill"
                  [style.width.%]="boyPercentage()"
                ></div>
              </div>
              <p class="percentage">{{ boyPercentage() }}%</p>
            </div>
          }
        </div>

        <!-- VS -->
        <div class="vs-divider">
          <span>VS</span>
        </div>

        <!-- Girl Box -->
        <div class="bet-box girl-box">
          <div class="box-icon">ğŸ‘§</div>
          <h2>å¥³ç”Ÿ</h2>
          @if (stats()) {
            <div class="stats-info">
              <p class="amount">NT$ {{ stats()!.girl.totalAmount | number }}</p>
              <p class="tickets">{{ stats()!.girl.totalTickets }} å¼µç±¤</p>
              <div class="percentage-bar">
                <div
                  class="fill girl-fill"
                  [style.width.%]="girlPercentage()"
                ></div>
              </div>
              <p class="percentage">{{ girlPercentage() }}%</p>
            </div>
          }
        </div>
      </div>

      <!-- Total Prize Pool -->
      <div class="prize-pool">
        <h3>ğŸ ç¸½çé‡‘æ± </h3>
        <p class="total-amount">NT$ {{ totalPrizePool() | number }}</p>
        @if (stats()) {
          <p class="total-participants">å…± {{ stats()!.totalUsers }} äººåƒèˆ‡</p>
        }
      </div>
    }
  </section>

  <!-- Action Section -->
  <section class="action-section">
    @if (isLoggedIn()) {
      <div class="user-info">
        <p>æ­¡è¿, {{ currentUser()?.name }}!</p>
        <div class="action-buttons">
          @if (!isRevealed()) {
            <a routerLink="/bet" class="btn btn-primary">ç«‹å³ä¸‹æ³¨</a>
          }
          <a routerLink="/my-bets" class="btn btn-secondary">æˆ‘çš„ä¸‹æ³¨</a>
          @if (isAdmin()) {
            <a routerLink="/admin" class="btn btn-admin">âš™ï¸ ç®¡ç†å¾Œå°</a>
          }
          <button (click)="logout()" class="btn btn-outline">ç™»å‡º</button>
        </div>
      </div>
    } @else {
      <div class="login-section">
        <p>ç™»å…¥å¾Œå³å¯åƒèˆ‡ä¸‹æ³¨ï¼</p>
        <div class="login-buttons">
          @if (!authService.showGoogleRenderedBtn()) {
            <button (click)="loginWithGoogle()" class="btn btn-google">
              <span class="icon">G</span> ä½¿ç”¨ Google ç™»å…¥
            </button>
          }
          <div id="google-signin-btn" [class.hidden]="!authService.showGoogleRenderedBtn()"></div>
          <button (click)="loginWithLine()" class="btn btn-line" disabled title="å³å°‡æ¨å‡º">
            <span class="icon">L</span> ä½¿ç”¨ LINE ç™»å…¥ï¼ˆå³å°‡æ¨å‡ºï¼‰
          </button>
        </div>
      </div>
    }
  </section>

  <!-- Rules Section -->
  <section class="rules-section">
    <h3>ğŸ“‹ ä¸‹æ³¨è¦å‰‡</h3>
    <ul>
      <li>ğŸ’° ä¸€æ³¨ NT$200</li>
      <li>â˜ï¸ æ¯äººé™ä¸‹ä¸€æ³¨ï¼ˆç”·ç”Ÿæˆ–å¥³ç”Ÿæ“‡ä¸€ï¼‰</li>
      <li>ğŸ‰ æ€§åˆ¥æ­æ›‰å¾Œï¼Œå¾çŒœå°çš„äººä¸­æŠ½å‡ºä¸€ä½å¹¸é‹å¾—ä¸»</li>
      <li>ğŸ† å¾—ä¸»ç¨å¾—å…¨éƒ¨çé‡‘æ± ï¼ˆæ‰£é™¤ 10% æ‰‹çºŒè²»ï¼‰</li>
      <li>ğŸ¼ 10% æ‰‹çºŒè²»ä½œç‚ºå¥¶ç²‰éŒ¢</li>
    </ul>
  </section>

  <!-- Navigation -->
  <nav class="bottom-nav">
    <a routerLink="/clues" class="nav-item">
      <span class="nav-icon">ğŸ”</span>
      <span>ç·šç´¢</span>
    </a>
    <a routerLink="/participants" class="nav-item">
      <span class="nav-icon">ğŸ‘¥</span>
      <span>åƒèˆ‡è€…</span>
    </a>
  </nav>
</div>
