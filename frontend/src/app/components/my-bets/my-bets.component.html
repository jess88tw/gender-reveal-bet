<div class="my-bets-container">
  <header class="page-header">
    <a routerLink="/" class="back-btn">â† è¿”å›</a>
    <h1>ğŸ“‹ æˆ‘çš„ä¸‹æ³¨</h1>
  </header>

  @if (!isLoggedIn()) {
    <div class="login-prompt">
      <p>è«‹å…ˆç™»å…¥æŸ¥çœ‹æ‚¨çš„ä¸‹æ³¨è¨˜éŒ„</p>
      <a routerLink="/" class="btn btn-primary">è¿”å›é¦–é ç™»å…¥</a>
    </div>
  } @else if (loading()) {
    <div class="loading">
      <div class="spinner"></div>
      <p>è¼‰å…¥ä¸­...</p>
    </div>
  } @else {
    <!-- Summary Cards -->
    <div class="summary-cards">
      <div class="summary-card boy-card">
        <span class="icon">ğŸ‘¦</span>
        <div class="info">
          <p class="label">ç”·ç”Ÿ</p>
          <p class="value">{{ getTotalByGender("BOY").tickets }} å¼µç±¤</p>
          <p class="amount">
            NT$ {{ getTotalByGender("BOY").amount | number }}
          </p>
        </div>
      </div>
      <div class="summary-card girl-card">
        <span class="icon">ğŸ‘§</span>
        <div class="info">
          <p class="label">å¥³ç”Ÿ</p>
          <p class="value">{{ getTotalByGender("GIRL").tickets }} å¼µç±¤</p>
          <p class="amount">
            NT$ {{ getTotalByGender("GIRL").amount | number }}
          </p>
        </div>
      </div>
    </div>

    <!-- Total -->
    <div class="total-section">
      <p>
        ç¸½è¨ˆ: <strong>{{ totalTickets }} å¼µç±¤</strong> /
        <strong>NT$ {{ totalAmount | number }}</strong>
      </p>
    </div>

    <!-- Bet List -->
    @if (myBets().length === 0) {
      <div class="empty-state">
        <p>æ‚¨é‚„æ²’æœ‰ä¸‹æ³¨è¨˜éŒ„</p>
        <a routerLink="/bet" class="btn btn-primary">ç«‹å³ä¸‹æ³¨</a>
      </div>
    } @else {
      <div class="bet-list">
        <h3>ä¸‹æ³¨è¨˜éŒ„</h3>
        @for (bet of myBets(); track bet.id) {
          <div
            class="bet-item"
            [class.boy]="bet.gender === 'BOY'"
            [class.girl]="bet.gender === 'GIRL'"
          >
            <div class="bet-icon">
              {{ bet.gender === "BOY" ? "ğŸ‘¦" : "ğŸ‘§" }}
            </div>
            <div class="bet-info">
              <p class="bet-gender">
                {{ bet.gender === "BOY" ? "ç”·ç”Ÿ" : "å¥³ç”Ÿ" }}
              </p>
              <p class="bet-details">
                {{ bet.ticketCount }} å¼µç±¤ â€¢ NT$ {{ bet.amount | number }}
              </p>
              <p class="bet-date">
                {{ bet.createdAt | date: "yyyy/MM/dd HH:mm" }}
              </p>
            </div>
            <div
              class="bet-status"
              [class.paid]="bet.isPaid"
              [class.unpaid]="!bet.isPaid"
            >
              @if (bet.isPaid) {
                âœ“ å·²ä»˜æ¬¾
              } @else {
                å¾…ä»˜æ¬¾
              }
            </div>
          </div>
        }
      </div>
    }

    <!-- Action Button -->
    <div class="action-section">
      <a routerLink="/bet" class="btn btn-primary">ç¹¼çºŒä¸‹æ³¨</a>
    </div>
  }
</div>
