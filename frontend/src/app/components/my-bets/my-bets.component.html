<div class="my-bets-container">
  <header class="page-header">
    <a routerLink="/" class="back-btn">â† è¿”å›</a>
    <h1>ğŸ“‹ æˆ‘çš„ä¸‹æ³¨</h1>
  </header>

  @if (!isLoggedIn()) {
    <div class="login-prompt">
      <div class="login-prompt-icon">ğŸ”’</div>
      <p>è«‹å…ˆç™»å…¥æŸ¥çœ‹æ‚¨çš„ä¸‹æ³¨è¨˜éŒ„</p>
      <a routerLink="/" class="btn btn-primary">è¿”å›é¦–é ç™»å…¥</a>
    </div>
  } @else if (loading()) {
    <div class="loading">
      <div class="spinner"></div>
      <p>è¼‰å…¥ä¸­...</p>
    </div>
  } @else {
    @if (myBets().length === 0) {
      <div class="empty-state">
        <div class="empty-icon">ğŸ²</div>
        <h3>å°šæœªä¸‹æ³¨</h3>
        <p>æ‚¨é‚„æ²’æœ‰ä¸‹æ³¨è¨˜éŒ„ï¼Œå¿«ä¾†åƒèˆ‡å§ï¼</p>
        <a routerLink="/bet" class="btn btn-primary">ç«‹å³ä¸‹æ³¨</a>
      </div>
    } @else {
      @for (bet of myBets(); track bet.id) {
        <!-- Hero Bet Card -->
        <div class="bet-hero" [class.boy]="bet.gender === 'BOY'" [class.girl]="bet.gender === 'GIRL'">
          <div class="bet-hero-icon">{{ bet.gender === 'BOY' ? 'ğŸ‘¦' : 'ğŸ‘§' }}</div>
          <h2 class="bet-hero-label">æˆ‘æŠ¼ {{ bet.gender === 'BOY' ? 'ç”·ç”Ÿ' : 'å¥³ç”Ÿ' }}</h2>
          <p class="bet-hero-amount">NT$ {{ bet.amount | number }}</p>
          <div class="bet-hero-badge" [class.paid]="bet.isPaid" [class.unpaid]="!bet.isPaid">
            @if (bet.isPaid) {
              âœ… å·²ç¢ºèªä»˜æ¬¾
            } @else {
              â³ å¾…ä»˜æ¬¾
            }
          </div>
        </div>

        <!-- Bet Details -->
        <div class="bet-details-card">
          <h3>ğŸ“ ä¸‹æ³¨æ˜ç´°</h3>
          <div class="detail-row">
            <span class="detail-label">ä¸‹æ³¨æ€§åˆ¥</span>
            <span class="detail-value">{{ bet.gender === 'BOY' ? 'ğŸ‘¦ ç”·ç”Ÿ' : 'ğŸ‘§ å¥³ç”Ÿ' }}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">ä¸‹æ³¨é‡‘é¡</span>
            <span class="detail-value highlight">NT$ {{ bet.amount | number }}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">ä»˜æ¬¾æ–¹å¼</span>
            <span class="detail-value">
              @if (bet.paymentMethod === 'bank_transfer') {
                ğŸ¦ éŠ€è¡Œè½‰å¸³
              } @else if (bet.paymentMethod === 'line_pay') {
                ğŸ’š LINE Pay
              } @else if (bet.paymentMethod === 'cash') {
                ğŸ’µ ç¾é‡‘
              } @else {
                â€”
              }
            </span>
          </div>
          <div class="detail-row">
            <span class="detail-label">ä»˜æ¬¾ç‹€æ…‹</span>
            <span class="detail-value">
              @if (bet.isPaid) {
                <span class="status-tag paid">å·²ä»˜æ¬¾</span>
              } @else {
                <span class="status-tag unpaid">å¾…ä»˜æ¬¾</span>
              }
            </span>
          </div>
          <div class="detail-row">
            <span class="detail-label">ä¸‹æ³¨æ™‚é–“</span>
            <span class="detail-value">{{ bet.createdAt | date:'yyyy/MM/dd HH:mm' }}</span>
          </div>
        </div>

        <!-- Payment Reminder -->
        @if (!bet.isPaid) {
          <div class="payment-reminder">
            <h4>ğŸ’³ ä»˜æ¬¾æé†’</h4>
            <p>è«‹æ–¼ä¸‹æ³¨å¾Œ <strong>3 æ—¥å…§</strong>å®Œæˆä»˜æ¬¾</p>
            @if (bet.paymentMethod === 'bank_transfer') {
              <div class="payment-info">
                <p class="payment-info-label">ğŸ¦ éŠ€è¡Œè½‰å¸³è³‡è¨Š</p>
                <p>ğŸ“© è«‹ç§è¨Šä¸»è¾¦äººå–å¾—åŒ¯æ¬¾å¸³è™Ÿ</p>
                <p>åŒ¯æ¬¾å¾Œè«‹é€šçŸ¥ä¸»è¾¦äººç¢ºèª</p>
              </div>
            } @else if (bet.paymentMethod === 'line_pay') {
              <div class="payment-info">
                <p class="payment-info-label">ğŸ’š LINE Pay</p>
                <p>è«‹é€é LINE Pay è½‰å¸³çµ¦ä¸»è¾¦äºº</p>
                <p>è½‰å¸³å¾Œè«‹æˆªåœ–é€šçŸ¥ä¸»è¾¦äººç¢ºèª</p>
              </div>
            } @else if (bet.paymentMethod === 'cash') {
              <div class="payment-info">
                <p class="payment-info-label">ğŸ’µ ç¾é‡‘ä»˜æ¬¾</p>
                <p>è«‹ç•¶é¢äº¤çµ¦ä¸»è¾¦äºº</p>
              </div>
            } @else {
              <div class="payment-info">
                <p>ğŸ“© è«‹ç§è¨Šä¸»è¾¦äººå–å¾—ä»˜æ¬¾è³‡è¨Š</p>
                <p>ä»˜æ¬¾å¾Œè«‹é€šçŸ¥ä¸»è¾¦äººç¢ºèª</p>
              </div>
            }
          </div>
        }
      }

      <!-- Navigation -->
      <div class="action-section">
        <a routerLink="/" class="btn btn-secondary">ğŸ  å›é¦–é </a>
        <a routerLink="/participants" class="btn btn-outline">ğŸ‘¥ åƒèˆ‡è€…</a>
      </div>
    }
  }
</div>
